<?xml version="1.0" encoding="utf-16"?>
<ZL_OBJECT CHECKSUM="4F9725C29FA9296D7AD94A93252FFF98" CODE_SIGNATURE="E753124A236042A3C7A2FF4ABE729943" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_CLAS_DATA" TYPE="CLAS" VERSION="1.01">
 <DEPENDENCIES>
  <ITEM TYPE="CLAS" NAME="ZAPLINK_OBJECT_DATA"/>
 </DEPENDENCIES>
 <DIRECTORY DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
 <RAW>
  <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" CLSFINAL="X" CLSCCINCL="X" FIXPT="X" UNICODE="X">
   <INHERITANCE REFCLSNAME="ZAPLINK_OBJECT_DATA" STATE="1"/>
   <TEXTS>
    <ITEM LANGU="E" DESCRIPT="Data for Class">
     <DOCUMENTATION TDFRELES="700" TDLRELES="700" TDLINESIZE="072">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_OBJECT.
ASDefine XML structure of an ABAP Object Class
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS</DOCUMENTATION>
    </ITEM>
   </TEXTS>
  </A0_MAINDATA>
  <ALIASES>
   <ITEM CMPNAME="TT_TEXTS" EXPOSURE="2" CMPTYPE="3" REFCLSNAME="ZAPLINK_DATATYPES" REFCMPNAME="TT_TEXTS"/>
  </ALIASES>
  <ATTRIBUTS>
   <ITEM CMPNAME="A0_MAINDATA" EXPOSURE="2" STATE="1" EDITORDER="1 " TYPTYPE="1" TYPE="TS_CLASS_DATA">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Maindata of Class">
      <DOCUMENTATION TDFRELES="700" TDLRELES="700" TDLINESIZE="072">U1&amp;MEANING&amp;
ASStore Class main data. &quot;A0_&quot; prefix has been use to keep this segment on
  the top of the list.
U1History
AS1) Using &quot;/&quot; as prefix
ASUsing &quot;/&quot; as prefix to ensure that this attributes will be the first in
  alphabetic order. Using &quot;/&quot;, for SAP, means namespace. In order to work
  you should also add another &quot;/&quot; which is the end of the namespace
  prefix. Because this attributes doesn&apos;t have anything after the second
  &quot;/&quot;, this namespace prefix is not controlled against the authorized
  namespaces list.
ASSo it&apos;s OK to use field starting with /.
AS
AS2) XML Node starting with &quot;/&quot;
ASThis kind of node is expected as a closing node, which is a problem for
  XML parser
AS
AS3) Using &quot;_&quot; as prefix
ASUsing &quot;_&quot; as prefix let this attributes at the end in the alphabetic
  order. So not working
U1&amp;HINTS&amp;
ASUse &quot;/&quot; as prefix with care or prefer simple attribute names without
  &quot;/&quot;.</DOCUMENTATION>
     </ITEM>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="DYNPROS" EXPOSURE="2" STATE="1" EDITORDER="7 " TYPTYPE="1" TYPE="TT_DYNPROS">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Class Dynpro"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="EXCEPTIONS_TEXTS" EXPOSURE="2" STATE="1" EDITORDER="5 " TYPTYPE="1" TYPE="TT_EXCEPTIONS_TEXTS"/>
   <ITEM CMPNAME="FRIENDS" EXPOSURE="2" STATE="1" EDITORDER="2 " TYPTYPE="1" TYPE="TT_FRIENDS">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Class Friends list"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="LOCAL" EXPOSURE="2" STATE="1" EDITORDER="4 " TYPTYPE="1" TYPE="TS_LOCALS">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Local data : Type, Implementaiton &amp; Macros"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="MENUPAINTER" EXPOSURE="1" STATE="1" EDITORDER="1 " TYPTYPE="1" TYPE="TO_MENUPAINTER"/>
   <ITEM CMPNAME="O_CX" STATE="1" EDITORDER="2 " ATTDECLTYP="1" TYPTYPE="1" TYPE="TO_ROOT_EXCEPTION">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="ZAPlink ROOT Exception"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="O_MYCX" STATE="1" EDITORDER="1 " ATTDECLTYP="1" TYPTYPE="1" TYPE="TO_EXCEPTION">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="ZAPlink ROOT Exception for Connectors"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="REDEFINITIONS" EXPOSURE="2" STATE="1" EDITORDER="3 " TYPTYPE="1" TYPE="TT_REDEFINITIONS">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Class&apos;s Methods redefinitions"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TEXTSPOOL" EXPOSURE="2" STATE="1" EDITORDER="6 " TYPTYPE="1" TYPE="TT_TXTP_TEXTPOOLS">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Textpool table"/>
    </TEXTS>
   </ITEM>
  </ATTRIBUTS>
  <EVENTS>
   <ITEM CMPNAME="MY_EVENT2" EXPOSURE="2" STATE="1" EDITORDER="1 ">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="bidon">
      <DOCUMENTATION TDFRELES="700" TDLINESIZE="072">U1&amp;MEANING&amp;
ASTest event to test documentation extraction
U1&amp;PARAMETERS&amp;
AS
U1&amp;HINTS&amp;
AS</DOCUMENTATION>
     </ITEM>
    </TEXTS>
   </ITEM>
  </EVENTS>
  <FRIENDS>
   <ITEM REFCLSNAME="ZAPLINK_EASYXML" STATE="1"/>
   <ITEM REFCLSNAME="ZAPLINK_OBJECT" STATE="1"/>
  </FRIENDS>
  <LOCAL>
   <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* implementation or private method&apos;s signature</TYPES>
   <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* local helper classes</IMPLEMENTATIONS>
   <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* in the implementation part of the class

INCLUDE zaplink_macros.</MACROS>
  </LOCAL>
  <METHODS>
   <ITEM CMPNAME="GET_SOURCE" STATE="1" EDITORDER="1 " MTDDECLTYP="1">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Clean ABAP Source code"/>
    </TEXTS>
    <PARAMETERS>
     <ITEM SCONAME="PROGRAM" CMPTYPE="1" EDITORDER="1 " PARPASSTYP="1" TYPTYPE="1" TYPE="PROGRAMM">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="ABAP Program Name"/>
      </TEXTS>
     </ITEM>
     <ITEM SCONAME="SOURCE" CMPTYPE="1" EDITORDER="2 " PARDECLTYP="3" TYPTYPE="1" TYPE="TD_ABAPSOURCE"/>
    </PARAMETERS>
    <SOURCE>`
  DATA code TYPE zaplink_object=&gt;tt_abaprawsource.
  DATA linecount TYPE i.
  DATA d_line LIKE LINE OF code.                            &quot; Issue 68
  FIELD-SYMBOLS: &lt;l&gt; LIKE LINE OF code.

  code = zaplink_object=&gt;get_prog_rawsource( program ).

  IF NOT code IS INITIAL.
    linecount = LINES( code ).
    IF linecount &gt; 1.
*      READ TABLE code ASSIGNING &lt;l&gt; INDEX linecount.      &quot; Issue 68
*      TRANSLATE &lt;l&gt; TO UPPER CASE.                        &quot;#EC SYNTCHAR
*      IF &lt;l&gt; CP &apos;ENDMETHOD.*&apos;.
      READ TABLE code INTO d_line INDEX linecount.
      TRANSLATE d_line TO UPPER CASE.                     &quot;#EC SYNTCHAR
      IF d_line CP &apos;ENDMETHOD.*&apos;.
        DELETE code INDEX linecount.
      ENDIF.
    ENDIF.
*    READ TABLE code ASSIGNING &lt;l&gt; INDEX 1.               &quot; Issue 68
*    TRANSLATE &lt;l&gt; TO UPPER CASE.                            &quot;#EC *
*    IF &lt;l&gt; CP &apos;METHOD *&apos;.                                 &quot;#EC SYNTCHAR
    READ TABLE code INTO d_line INDEX 1.
    TRANSLATE d_line TO UPPER CASE.                         &quot;#EC *
    IF d_line CP &apos;METHOD *&apos;.                              &quot;#EC SYNTCHAR
      DELETE code INDEX 1.
    ENDIF.

* Issue 68 Start : Blank line at the end of source code can&apos;t be imported =&gt; Remove it
    IF NOT code IS INITIAL.
      linecount = LINES( code ).
      READ TABLE code ASSIGNING &lt;l&gt; INDEX linecount.
      WHILE &lt;l&gt; IS INITIAL.
        DELETE code INDEX linecount.
        linecount = LINES( code ).
        READ TABLE code ASSIGNING &lt;l&gt; INDEX linecount.
        IF NOT &lt;l&gt; IS ASSIGNED.   EXIT.   ENDIF.
      ENDWHILE.
    ENDIF.
* Issue 68 END
  ENDIF.

  source = zaplink_object=&gt;conv_abap_raw2source( code ).</SOURCE>
   </ITEM>
   <ITEM CMPNAME="SOTR2VALUE" STATE="1" EDITORDER="3 " MTDDECLTYP="1">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Convert SOTR_CONC to Attrvalue"/>
    </TEXTS>
    <PARAMETERS>
     <ITEM SCONAME="DATA" CMPTYPE="1" EDITORDER="1 " PARPASSTYP="1" TYPTYPE="1" TYPE="SOTR_CONC">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="Initial value"/>
      </TEXTS>
     </ITEM>
     <ITEM SCONAME="RESULT" CMPTYPE="1" EDITORDER="2 " PARDECLTYP="3" TYPTYPE="1" TYPE="SEOVALUE">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="Key for Logical Object in the OTR"/>
      </TEXTS>
     </ITEM>
    </PARAMETERS>
    <SOURCE>`
  concatenate &apos;&apos;&apos;&apos; data &apos;&apos;&apos;&apos; into result.</SOURCE>
   </ITEM>
   <ITEM CMPNAME="UPDATE_CONCEPT" EXPOSURE="2" STATE="1" EDITORDER="1 " MTDDECLTYP="1" MTDNEWEXC="X">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Update Concepts"/>
    </TEXTS>
    <PARAMETERS>
     <ITEM SCONAME="FM_DATA" CMPTYPE="1" EDITORDER="2 " PARDECLTYP="2" PARPASSTYP="1" TYPTYPE="1" TYPE="T_FM_DATA"/>
     <ITEM SCONAME="MSG_COL" CMPTYPE="1" EDITORDER="1 " PARPASSTYP="1" TYPTYPE="1" TYPE="TO_MSG_COL">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="Message Collector"/>
      </TEXTS>
     </ITEM>
    </PARAMETERS>
    <EXCEPTIONS>
     <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" LANGU="E" EDITORDER="1 ">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="ZAPlink ROOT Exception for Connectors"/>
      </TEXTS>
     </ITEM>
    </EXCEPTIONS>
    <SOURCE>`
  DATA lt_types TYPE sotr_objects.
  DATA _type    LIKE LINE OF lt_types.
  DATA _paket   TYPE sotr_pack.
  DATA _entries TYPE sotr_text_tt.
  DATA _entry   LIKE LINE OF _entries.
  DATA lt_cx    TYPE tt_cx_texts.
  DATA ls_cx    LIKE LINE OF fm_data-exceptions_texts.
  FIELD-SYMBOLS:
    &lt;at&gt; LIKE LINE OF fm_data-attributes,
    &lt;cx&gt; LIKE LINE OF fm_data-exceptions_texts,
    &lt;lt&gt; LIKE LINE OF &lt;cx&gt;-longtexts.
  DATA _at     LIKE LINE OF fm_data-attributes.
  DATA concept TYPE  sotr_text-concept.
  DATA t_texts TYPE  sotr_textl_tt.
  DATA s_text  LIKE LINE OF t_texts.
  DATA s_sotrl TYPE sotr_link.

  TRY.
      LOOP AT fm_data-exceptions_texts ASSIGNING &lt;cx&gt;.
* Get Type
        CALL FUNCTION &apos;SOTR_OBJECT_GET_OBJECTS&apos;
          EXPORTING
            object_vector    = &lt;cx&gt;-objid_vec
          IMPORTING
            OBJECTS          = lt_types
          EXCEPTIONS
            object_not_found = 1
            OTHERS           = 2.
        IF sy-subrc &lt;&gt; 0 OR lt_types IS INITIAL.
          CALL METHOD msg_col-&gt;add_symsg( ).
          CONTINUE.
        ENDIF.
        READ TABLE lt_types INTO _type INDEX 1.

        _paket-paket = &lt;cx&gt;-paket.

        IF NOT &lt;cx&gt;-longtexts IS INITIAL.
          LOOP AT &lt;cx&gt;-longtexts ASSIGNING &lt;lt&gt;.
            CLEAR s_text. MOVE-CORRESPONDING &lt;lt&gt; TO s_text.
            APPEND s_text TO t_texts.
          ENDLOOP.

          CALL FUNCTION &apos;SOTR_STRING_CREATE_CONCEPT&apos;
            EXPORTING
              paket                               = _paket    &quot; &lt;cx&gt;-lhdr-paket
              crea_lan                            = &lt;cx&gt;-lhdr-crea_lan
*           ALIAS_NAME                          =
*           CATEGORY                            =
              object                              = _type
              entries                             = t_texts
*           FLAG_CORRECTION_ENTRY               =
*           IN_UPDATE_TASK                      =
            IMPORTING
              concept                             = &lt;cx&gt;-lhdr-concept
*           ALIAS                               =
            EXCEPTIONS
              package_missing                     = 1
              crea_lan_missing                    = 2
              object_missing                      = 3
              paket_does_not_exist                = 4
              alias_already_exist                 = 5
              object_type_not_found               = 6
              langu_missing                       = 7
              identical_context_not_allowed       = 8
              text_too_long                       = 9
              error_in_update                     = 10
              no_master_langu                     = 11
              error_in_concept_id                 = 12
              internal_error                      = 13
              concept_not_found                   = 14
              tadir_entry_creation_failed         = 15
              error_in_correction                 = 16
              user_cancelled                      = 17
              no_entry_found                      = 18
              alias_not_allowed                   = 19
              OTHERS                              = 20.
          IF sy-subrc &lt;&gt; 0.
            o_mycx ?= zaplink_cx=&gt;create_from_mf_cx( subrc = sy-subrc
                                                 classname = &apos;ZAPLINK_CX_CONNECTOR&apos;
                                                  funcname = &apos;SOTR_STRING_CREATE_CONCEPT&apos; ).
            IF NOT msg_col IS BOUND.
              RAISE EXCEPTION o_mycx.
            ELSE.
              msg_col-&gt;add_symsg( ).
              CALL METHOD msg_col-&gt;add_exception
                EXPORTING
                  exception = o_mycx.
            ENDIF.
          ENDIF.
        ENDIF.

        _entries = &lt;cx&gt;-texts.
        MODIFY _entries FROM _entry TRANSPORTING concept WHERE concept &lt;&gt; _entry-concept.
        ls_cx = &lt;cx&gt;.
        TRY.
            CALL FUNCTION &apos;SOTR_CREATE_CONCEPT&apos;
              EXPORTING
                paket                               = _paket
                crea_lan                            = &lt;cx&gt;-crea_lan
                alias_name                          = &lt;cx&gt;-alias_name
*                CATEGORY                            =
                object                              = _type
                entries                             = _entries
*                FLAG_CORRECTION_ENTRY               =
*                IN_UPDATE_TASK                      =
                concept_default                     = &lt;cx&gt;-concept
*                FLAG_COPY_TEXT                      =
              IMPORTING
                concept                             = ls_cx-concept
*               NEW_ENTRIES                         =
              EXCEPTIONS
                package_missing                     = 1
                crea_lan_missing                    = 2
                object_missing                      = 3
                paket_does_not_exist                = 4
                alias_already_exist                 = 5
                object_type_not_found               = 6
                langu_missing                       = 7
                identical_context_not_allowed       = 8
                text_too_long                       = 9
                error_in_update                     = 10
                no_master_langu                     = 11
                error_in_concept_id                 = 12
                alias_not_allowed                   = 13
                tadir_entry_creation_failed         = 14
                internal_error                      = 15
                error_in_correction                 = 16
                user_cancelled                      = 17
                no_entry_found                      = 18
                OTHERS                              = 19.
          CATCH cx_root.
*        CALL METHOD msg_col-&gt;add_warning

* Concept can&apos;t be created try build new one
            CALL FUNCTION &apos;SOTR_CREATE_CONCEPT&apos;
              EXPORTING
                paket                               = _paket
                crea_lan                            = &lt;cx&gt;-crea_lan
                alias_name                          = &lt;cx&gt;-alias_name
*       CATEGORY                            =
                object                              = _type
                entries                             = _entries
*       FLAG_CORRECTION_ENTRY               =
*       IN_UPDATE_TASK                      =
*       CONCEPT_DEFAULT                     =
*       FLAG_COPY_TEXT                      =
              IMPORTING
                concept                             = ls_cx-concept
*       NEW_ENTRIES                         =
              EXCEPTIONS
                package_missing                     = 1
                crea_lan_missing                    = 2
                object_missing                      = 3
                paket_does_not_exist                = 4
                alias_already_exist                 = 5
                object_type_not_found               = 6
                langu_missing                       = 7
                identical_context_not_allowed       = 8
                text_too_long                       = 9
                error_in_update                     = 10
                no_master_langu                     = 11
                error_in_concept_id                 = 12
                alias_not_allowed                   = 13
                tadir_entry_creation_failed         = 14
                internal_error                      = 15
                error_in_correction                 = 16
                user_cancelled                      = 17
                no_entry_found                      = 18
                OTHERS                              = 19.
        ENDTRY.
        IF sy-subrc &lt;&gt; 0.
          o_mycx ?= zaplink_cx=&gt;create_from_mf_cx( subrc = sy-subrc
                                               classname = &apos;ZAPLINK_CX_CONNECTOR&apos;
                                                funcname = &apos;SOTR_CREATE_CONCEPT&apos; ).
          IF NOT msg_col IS BOUND.
            RAISE EXCEPTION o_mycx.
          ELSE.
            msg_col-&gt;add_symsg( ).
            CALL METHOD msg_col-&gt;add_exception
              EXPORTING
                exception = o_mycx.
          ENDIF.
          CONTINUE.
        ENDIF.

        IF &lt;cx&gt;-lhdr-concept &lt;&gt; ls_cx-concept AND NOT &lt;cx&gt;-lhdr-concept IS INITIAL.
          s_sotrl-concept_1 = ls_cx-concept.    &quot; FLAG_STR_1
          s_sotrl-concept_2 = &lt;cx&gt;-lhdr-concept.    s_sotrl-flag_str_2 = abap_true.
          CALL FUNCTION &apos;SOTR_LINK_UPDATE_LINK&apos;
            EXPORTING
              sotr_link         = s_sotrl
            EXCEPTIONS
              incomplete_data   = 1
              concept_not_found = 2
              OTHERS            = 3.
          IF sy-subrc &lt;&gt; 0.
            o_mycx ?= zaplink_cx=&gt;create_from_mf_cx( subrc = sy-subrc
                                                 classname = &apos;ZAPLINK_CX_CONNECTOR&apos;
                                                  funcname = &apos;SOTR_LINK_UPDATE_LINK&apos; ).
            IF NOT msg_col IS BOUND.
              RAISE EXCEPTION o_mycx.
            ELSE.
              msg_col-&gt;add_symsg( ).
              CALL METHOD msg_col-&gt;add_exception
                EXPORTING
                  exception = o_mycx.
            ENDIF.
          ENDIF.

        ENDIF.

* Update Attribute
        _at-clsname = fm_data-class-clsname.    _at-cmpname = &lt;cx&gt;-cmpname.
        IF &lt;cx&gt;-cmpname IS INITIAL.
          READ TABLE fm_data-attributes ASSIGNING &lt;at&gt;
               WITH KEY cmpname = fm_data-class-clsname.
        ELSE.
          READ TABLE fm_data-attributes ASSIGNING &lt;at&gt;
               WITH KEY cmpname = &lt;cx&gt;-cmpname.
        ENDIF.
        IF sy-subrc &lt;&gt; 0.
          RAISE EXCEPTION TYPE zaplink_cx_connector
             EXPORTING
               textid = ZAPLINK_CX=&gt;SYSTEM_ERROR
               cx_name = &apos;Attribut should exists !!&apos;.
        ENDIF.
        &lt;at&gt;-attvalue = sotr2value( ls_cx-concept ).
*        CLEAR: _at.
*        _at-clsname = fm_data-class-clsname.    _at-cmpname = &lt;cx&gt;-cmpname.
*        IF _at-cmpname IS INITIAL. _at-cmpname = fm_data-class-clsname. ENDIF.  &quot; do not repeat self exception text : Issue 64
*        _at-attdecltyp = &apos;2&apos;.   &quot; Constant
*        _at-exposure = &apos;2&apos;.     &quot; Public
*        _at-state = &apos;1&apos;.        &quot; Implemented
*        _at-locked = abap_true.
*        _at-typtype = &apos;1&apos;.      &quot; Type
*        _at-type = &apos;SOTR_CONC&apos;.
*        _at-attvalue = sotr2value( ls_cx-concept ).
*        INSERT _at INTO TABLE fm_data-attributes.

        CHECK ls_cx-concept &lt;&gt; &lt;cx&gt;-concept.

        INSERT ls_cx INTO TABLE lt_cx.
        DELETE fm_data-exceptions_texts.
      ENDLOOP.

      INSERT LINES OF fm_data-exceptions_texts INTO TABLE lt_cx.
      fm_data-exceptions_texts = lt_cx.
    CATCH zaplink_cx_connector INTO o_mycx.
      RAISE EXCEPTION o_mycx.
    CATCH zaplink_cx INTO o_cx.
      mac_cascade_raise o_mycx o_cx.
  ENDTRY.</SOURCE>
   </ITEM>
   <ITEM CMPNAME="VALUE2SOTR" STATE="1" EDITORDER="2 " MTDDECLTYP="1">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Convert Attrvalue to SOTR_CONC">
      <DOCUMENTATION TDFRELES="700" TDLINESIZE="072">U1&amp;FUNCTIONALITY&amp;
ASUsed for exception class to convert exception attribute value into SOTR
  concept.
U1&amp;PRECONDITION&amp;
AS
U1&amp;RESULT&amp;
AS
U1&amp;PARAMETERS&amp;
AS
U1&amp;EXCEPTIONS&amp;
AS
U1&amp;HINTS&amp;
AS</DOCUMENTATION>
     </ITEM>
    </TEXTS>
    <PARAMETERS>
     <ITEM SCONAME="DATA" CMPTYPE="1" EDITORDER="1 " PARPASSTYP="1" TYPTYPE="1" TYPE="SEOVALUE">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="Initial value"/>
      </TEXTS>
     </ITEM>
     <ITEM SCONAME="RESULT" CMPTYPE="1" EDITORDER="2 " PARDECLTYP="3" TYPTYPE="1" TYPE="SOTR_CONC">
      <TEXTS>
       <ITEM LANGU="E" DESCRIPT="Key for Logical Object in the OTR"/>
      </TEXTS>
     </ITEM>
    </PARAMETERS>
    <SOURCE>`
  DATA _val TYPE seovalue.

  _val = data.
  REPLACE ALL OCCURRENCES OF &apos;&apos;&apos;&apos; IN _val WITH space.
  CONDENSE _val.
  result = _val.</SOURCE>
   </ITEM>
  </METHODS>
  <REDEFINITIONS>
   <ITEM REFCLSNAME="ZAPLINK_OBJECT_DATA" MTDNAME="ANONYMIZE">
    <SOURCE>`
  DATA s_fr LIKE LINE OF friends.
  DATA s_re LIKE LINE OF redefinitions.

  super-&gt;anonymize( ).
  CLEAR: a0_maindata-author, a0_maindata-createdon, a0_maindata-changedby, a0_maindata-changedon, a0_maindata-chgdanyby, a0_maindata-chgdanyon, a0_maindata-r3release,
    a0_maindata-inheritance-author, a0_maindata-inheritance-createdon, a0_maindata-inheritance-changedby, a0_maindata-inheritance-changedon, a0_maindata-inheritance-version. &quot; Issue 75

* FRIENDS
  MODIFY friends FROM s_fr TRANSPORTING author createdon changedby changedon version &quot; Issue 75
         WHERE NOT refclsname IS INITIAL OR refclsname IS INITIAL. &quot; Issue 68

*REDEFINITIONS
  MODIFY redefinitions FROM s_re TRANSPORTING version       &quot; Issue 75
         WHERE NOT refclsname IS INITIAL OR refclsname IS INITIAL.

*LOCAL : OK
*EXCEPTIONS_TEXTS : OK &quot; Issue 62
*  MODIFY exceptions_texts FROM s_et TRANSPORTING author createdon changedby changedon r3release crea_name crea_tstut chan_name chan_tstut
*         WHERE NOT cmpname IS INITIAL.</SOURCE>
   </ITEM>
   <ITEM REFCLSNAME="ZAPLINK_OBJECT_DATA" MTDNAME="COMPLETE_DATA">
    <SOURCE>`
  DATA _val TYPE seovalue.
  DATA _sotr LIKE LINE OF fm_data-exceptions_texts.
  DATA _text TYPE STANDARD TABLE OF sotr_text.
  DATA _attr_text LIKE LINE OF fm_data-component_desc.
  FIELD-SYMBOLS:
    &lt;pt&gt; LIKE LINE OF fm_data-component_desc,
    &lt;st&gt; LIKE LINE OF _sotr-texts,
    &lt;a&gt; LIKE LINE OF fm_data-attributes.

  obj_name = fm_data-class-clsname.                         &quot; Issue 23
  CALL METHOD super-&gt;complete_data
    CHANGING
      fm_data = fm_data.

  IF fm_data-class-category = &apos;40&apos;.  &quot; 40	Exception Class
    LOOP AT fm_data-attributes ASSIGNING &lt;a&gt;
         WHERE attdecltyp = &apos;2&apos;   &quot; Constant
           AND locked = abap_true
           AND type = &apos;SOTR_CONC&apos;
           AND NOT attvalue IS INITIAL.
      CLEAR _sotr. _sotr-cmpname = &lt;a&gt;-cmpname.
      _sotr-concept = value2sotr( &lt;a&gt;-attvalue ).
*      CALL FUNCTION &apos;SOTR_LINK_GET_LINK&apos;
      SELECT SINGLE concept_2 INTO _sotr-lhdr-concept
        FROM sotr_link
        WHERE concept_1 = _sotr-concept.
      IF sy-subrc = 0.
*        CALL FUNCTION &apos;SOTR_STRING_READ_TEXT_WITH_KEY&apos;
        SELECT SINGLE * INTO _sotr-lhdr
          FROM sotr_headu
          WHERE concept = _sotr-lhdr-concept.
        SELECT * INTO TABLE _sotr-longtexts
          FROM sotr_textu
          WHERE concept = _sotr-lhdr-concept.
      ENDIF.

      CALL FUNCTION &apos;SOTR_GET_CONCEPT&apos;
        EXPORTING
          concept        = _sotr-concept
        IMPORTING
          header         = _sotr-hdr
        TABLES
          entries        = _text
        EXCEPTIONS
          no_entry_found = 1
          OTHERS         = 2.
      IF sy-subrc &lt;&gt; 0.
        CLEAR: _sotr, _val, _text.
        CONTINUE.
      ENDIF.

      _sotr-texts = _text.
      _sotr-cmpname = &lt;a&gt;-cmpname.
      INSERT _sotr INTO TABLE fm_data-exceptions_texts.
      LOOP AT _sotr-texts ASSIGNING &lt;st&gt;
           WHERE NOT text IS INITIAL.
        READ TABLE fm_data-component_desc ASSIGNING &lt;pt&gt;
             WITH KEY cmpname = &lt;a&gt;-cmpname
                        langu = &lt;st&gt;-langu.
        IF sy-subrc = 0.
          IF &lt;pt&gt;-descript IS INITIAL.
            &lt;pt&gt;-descript = &lt;st&gt;-text.
          ENDIF.
        ELSE.
          MOVE-CORRESPONDING &lt;a&gt; TO _attr_text.
          _attr_text-langu = &lt;st&gt;-langu.
          _attr_text-descript = &lt;st&gt;-text.
          INSERT _attr_text INTO TABLE fm_data-component_desc.
        ENDIF.
      ENDLOOP.

    ENDLOOP.
  ENDIF.</SOURCE>
   </ITEM>
   <ITEM REFCLSNAME="ZAPLINK_OBJECT_DATA" MTDNAME="FROM_DATA">
    <SOURCE>`
  DATA _in  LIKE LINE OF interfaces.
  DATA _ia  LIKE LINE OF _in-components.
  DATA _t   LIKE LINE OF a0_maindata-texts.
  DATA _fr  LIKE LINE OF friends.
  DATA _re  LIKE LINE OF me-&gt;redefinitions.
  DATA _me  LIKE LINE OF methods.
  DATA _dep LIKE LINE OF _dependencies.
  DATA _mk  TYPE seocpdkey.
  DATA _source TYPE zaplink_program=&gt;ts_source.
  FIELD-SYMBOLS:
    &lt;dc&gt;  LIKE LINE OF deferred-classes,
    &lt;di&gt;  LIKE LINE OF deferred-interfaces,
    &lt;m_&gt;  LIKE LINE OF fm_data-includes-methods,
    &lt;im&gt;  LIKE LINE OF fm_data-implementings,
    &lt;ei&gt;  LIKE LINE OF fm_data-explore_implementings,
    &lt;ic&gt;  LIKE LINE OF &lt;ei&gt;-comprisings,
    &lt;rd&gt;  LIKE LINE OF fm_data-impl_details,
    &lt;me&gt;  LIKE LINE OF methods,
    &lt;fr&gt;  LIKE LINE OF fm_data-friendships,
    &lt;re&gt;  LIKE LINE OF fm_data-redefinitions.

* added for exception classes
  FIELD-SYMBOLS:
    &lt;cx&gt;   LIKE LINE OF fm_data-exceptions_texts,
    &lt;cxt&gt;  LIKE LINE OF &lt;cx&gt;-texts,
    &lt;cxl&gt;  LIKE LINE OF &lt;cx&gt;-longtexts,
    &lt;at&gt;   LIKE LINE OF fm_data-attributes.
  DATA _cx_text  LIKE LINE OF exceptions_texts.
  DATA _sotr_key TYPE sotr_conc.
*  DATA _text     LIKE LINE OF _cx_text-longtexts.
  DATA _text     LIKE LINE OF _cx_text-texts.
  DATA _fm_data  TYPE t_fm_data.
* added for documentation move
  FIELD-SYMBOLS:
    &lt;desc&gt; LIKE LINE OF fm_data-class_desc,
    &lt;doc&gt;  LIKE LINE OF fm_data-documentation,
    &lt;dt&gt;   LIKE LINE OF &lt;doc&gt;-texts.
  DATA s_txt  LIKE LINE OF a0_maindata-texts.
  DATA s_key  TYPE ts_doc_key.

  a0_maindata-hdr = fm_data-class.
  obj_name = a0_maindata-clsname.
  obj_version = a0_maindata-version.
  obj_langu = a0_maindata-langu.
  obj_type = object_types-class.
  CLEAR a0_maindata-uuid.                                   &quot; Issue 59

*CLASS_DESC  TYPE tt_SEOCLASSTX,
  a0_maindata-inheritance = fm_data-inheritance.
  CLEAR a0_maindata-inheritance-clsname.

* Class texts
* Issue 33 : Documentation connected to text
  a0_maindata-texts = fd_text( descriptions  = fm_data-class_desc
                                   classname = obj_name
                                          id = doc_ids-class-header
                               documentation = fm_data-documentation ).
  IF NOT a0_maindata-texts IS INITIAL. CLEAR a0_maindata-descript. ENDIF.

* Attribute to Exception_text for exception class, must stand before calling super
  _fm_data = fm_data.
  IF fm_data-class-category = &apos;40&apos;.  &quot; 40	Exception Class
    DELETE _fm_data-methods WHERE cmpname = &apos;CONSTRUCTOR&apos;.    &quot; Auto generated
    LOOP AT _fm_data-attributes ASSIGNING &lt;at&gt;
         WHERE attdecltyp = &apos;2&apos;   &quot; Constant
           AND locked = abap_true
           AND type = &apos;SOTR_CONC&apos;
           AND NOT attvalue IS INITIAL.
      CLEAR _cx_text.   MOVE-CORRESPONDING &lt;at&gt; TO _cx_text. &quot; Issue 71.
*      _sotr_key = value2sotr( &lt;at&gt;-attvalue ).
* Issue 62 : Start
      READ TABLE fm_data-exceptions_texts ASSIGNING &lt;cx&gt;
           WITH TABLE KEY cmpname = _cx_text-cmpname.
      IF sy-subrc &lt;&gt; 0.
        CONTINUE.
      ENDIF.
      LOOP AT &lt;cx&gt;-texts ASSIGNING &lt;cxt&gt;.
        CLEAR _text.
        _text-langu = &lt;cxt&gt;-langu.
        _text-short_txt = &lt;cxt&gt;-text.
        READ TABLE &lt;cx&gt;-longtexts ASSIGNING &lt;cxl&gt;
             WITH KEY langu = _text-langu.
        IF sy-subrc = 0.    &quot; has long texts
          _text-long_txt-_ = &lt;cxl&gt;-text.
          REPLACE ALL OCCURRENCES OF cl_abap_char_utilities=&gt;cr_lf IN _text-long_txt-_ WITH cl_abap_char_utilities=&gt;newline.   &quot; Issue 63 : Text has CR &amp; CR+LF
        ENDIF.
        INSERT _text INTO TABLE _cx_text-texts.
      ENDLOOP.
*      _cx_text-cx = &lt;cx&gt;-hdr.
*      _cx_text-longtexts = &lt;cx&gt;-texts.
*      _cx_text-texts = fd_comp_desc( descriptions = fm_data-component_desc
*                                               id = doc_ids-class-attribute
*                                    documentation = fm_data-documentation
*                                        component = &lt;at&gt;-cmpname ).
**      _cx_text-texts = &lt;cx&gt;-texts.
**      MODIFY _cx_text-texts FROM _text TRANSPORTING concept WHERE concept &lt;&gt; _text-concept.    &quot; SOTR
*      MODIFY _cx_text-longtexts FROM _text TRANSPORTING concept WHERE concept &lt;&gt; _text-concept.    &quot; SOTR
*      CLEAR: _cx_text-attvalue, _cx_text-clsname, _cx_text-langu, _cx_text-descript.    &quot; Attribut
** SOTR can&apos;t be change or created using external key.
** When you change texts of an exception it&apos;s SOTR GUID change :-(
*      CLEAR: _cx_text-concept.                                                          &quot; SOTR
** So don&apos;t save KEY to component useless
      IF &lt;at&gt;-cmpname = a0_maindata-clsname. CLEAR _cx_text-cmpname. ENDIF.  &quot; do not repeat self exception text : Issue 64
      INSERT _cx_text INTO TABLE exceptions_texts.
* Issue 62 : End
      DELETE _fm_data-attributes.                 &quot; exception text no logner an attribute
    ENDLOOP.
  ENDIF.

  CALL METHOD super-&gt;from_data
    EXPORTING
      fm_data = _fm_data.

* Dynpro : Issue 8
  dynpros = _fm_data-dynpros.

* Menupainter : Issue 9
  menupainter = _fm_data-menupainter.

* TEXTPools : Issue 1
  textspool = _fm_data-textspool.

*LOCAL definitions
  local-types-_ = get_source( fm_data-includes-ccdef ).
  local-implementations-_ = get_source( fm_data-includes-ccimp ).
  local-macros-_ = get_source( fm_data-includes-ccmac ).

*IMPLEMENTINGS  TYPE  SEOR_IMPLEMENTINGS_R
  LOOP AT fm_data-implementings ASSIGNING &lt;im&gt;
          WHERE clsname = a0_maindata-clsname.
    CLEAR _in.
    _in-hdr = &lt;im&gt;.

    LOOP AT fm_data-impl_details ASSIGNING &lt;rd&gt;
         WHERE clsname = &lt;im&gt;-clsname
           AND refclsname = &lt;im&gt;-refclsname.
*           and version = &lt;im&gt;-version   &quot; needed ?
      CLEAR _ia.
*      _ia = &lt;rd&gt;.
      _ia-hdr = &lt;rd&gt;.
      CLEAR: _ia-clsname, _ia-refclsname.
*      APPEND _ia  TO _in-attributes_redefinition.

      IF &lt;rd&gt;-attvalue IS INITIAL             &quot; Component is a method
* because attribute without new default value are not displayed in impl_details because not implemented (no change made)
* Attribute in interface can&apos;t have any default value
* If in the future they could have it will be necessary to test a interface with default value implemented by a class where default value is return to none.
         AND &lt;rd&gt;-mtdabstrct IS INITIAL.      &quot; not abstract : with source code
        CLEAR _mk.
        _mk-clsname = &lt;rd&gt;-clsname.
        CONCATENATE &lt;rd&gt;-refclsname method_separator &lt;rd&gt;-mtdname INTO _mk-cpdname.
        READ TABLE _fm_data-includes-methods ASSIGNING &lt;m_&gt;
             WITH KEY cpdkey = _mk.
        IF sy-subrc = 0.
          _ia-source-_ = get_source( &lt;m_&gt;-incname ).
          IF NOT _ia-source-_ IS INITIAL.
            CLEAR &lt;m_&gt;. &quot; do it once : DELETE _fm_data-includes-methods. dump
          ENDIF.
        ENDIF.
        IF _ia-source-_ IS INITIAL.
          _ia-source-_ = &apos;Source code Expected&apos;(sce). &quot; to generate a compilation error on target method in order to user to investigate the reson
        ENDIF.
      ENDIF.

      INSERT _ia  INTO TABLE _in-components.
    ENDLOOP.

    CLEAR _in-clsname.
    INSERT _in INTO TABLE interfaces.
  ENDLOOP.

* Interface declared in an other interface should be removed, because when adding interface the included interface will be added also
* This prevent import failure
  LOOP AT fm_data-explore_implementings ASSIGNING &lt;ei&gt;
       WHERE NOT comprisings IS INITIAL.
    LOOP AT &lt;ei&gt;-comprisings ASSIGNING &lt;ic&gt;.
      DELETE interfaces WHERE refclsname = &lt;ic&gt;-refclsname.
    ENDLOOP.
  ENDLOOP.

*Methodes Source
* ISSUE 4
*  LOOP AT _fm_data-includes-methods ASSIGNING &lt;m_&gt;.
*    _source = get_source( &lt;m_&gt;-incname ).
*    CHECK NOT _source IS INITIAL.
*    _mk = &lt;m_&gt;-cpdkey.
*    CHECK _mk-clsname = a0_maindata-clsname.
*    READ TABLE methods ASSIGNING &lt;me&gt;
*         WITH TABLE KEY cmpname = _mk-cpdname.
*    IF sy-subrc = 0.
*      &lt;me&gt;-source-_ = _source.
*    ELSE.
*      _me-cmpname = _mk-cpdname.
*      _me-source-_ = _source.
*      INSERT _me INTO TABLE methods.
*    ENDIF.
*  ENDLOOP.
  LOOP AT methods ASSIGNING &lt;me&gt;.
    _mk-clsname = a0_maindata-clsname.
    _mk-cpdname = &lt;me&gt;-cmpname.
    READ TABLE _fm_data-includes-methods ASSIGNING &lt;m_&gt;
         WITH KEY cpdkey = _mk.
    CHECK sy-subrc = 0.
    _source = get_source( &lt;m_&gt;-incname ).
    CHECK NOT _source IS INITIAL.
    &lt;me&gt;-source-_ = _source.
  ENDLOOP.
* ISSUE 4

*FRIENDSHIPS  TYPE  SEOF_FRIENDSHIPS_R
  LOOP AT fm_data-friendships ASSIGNING &lt;fr&gt;
    WHERE clsname = a0_maindata-clsname.
    CLEAR _fr.  _fr = &lt;fr&gt;.   CLEAR _fr-clsname.
    IF _fr-refclsname = a0_maindata-clsname. CLEAR _fr-refclsname. ENDIF.  &quot; do not repeat self : Issue 64
    INSERT _fr INTO TABLE friends.
  ENDLOOP.

*REDEFINITIONS  TYPE  SEOR_REDEFINITIONS_R
*IMPL_DETAILS TYPE  SEOR_REDEFINITIONS_R
  LOOP AT fm_data-redefinitions ASSIGNING &lt;re&gt;
       WHERE clsname = a0_maindata-clsname.
    CLEAR: _re.
    _re-hdr = &lt;re&gt;.

    _mk-clsname = &lt;re&gt;-clsname.
    _mk-cpdname = &lt;re&gt;-mtdname.
    READ TABLE fm_data-includes-methods ASSIGNING &lt;m_&gt;
         WITH KEY cpdkey = _mk.
    IF sy-subrc = 0.
      _re-source-_ = get_source( &lt;m_&gt;-incname ).
    ENDIF.

    CLEAR _re-clsname.
    INSERT _re INTO TABLE redefinitions.
  ENDLOOP.

* Issue 47 : Introducing dependencies
  IF NOT redefinitions IS INITIAL.    CLEAR _dep.   _dep-type = object_types-class.   _dep-name = a0_maindata-inheritance-refclsname. INSERT _dep INTO TABLE _dependencies.   ENDIF.
* Issue 74 : Adding Deffered elements to dependencies
  LOOP AT deferred-classes ASSIGNING &lt;dc&gt;.
    CLEAR _dep.   _dep-type = object_types-class.   _dep-name = &lt;dc&gt;-typegroup.
    INSERT _dep INTO TABLE _dependencies.
  ENDLOOP.
  LOOP AT deferred-interfaces ASSIGNING &lt;di&gt;.
    CLEAR _dep.   _dep-type = object_types-interface.   _dep-name = &lt;di&gt;-typegroup.
    INSERT _dep INTO TABLE _dependencies.
  ENDLOOP.

  clear_tags( ).</SOURCE>
   </ITEM>
   <ITEM REFCLSNAME="ZAPLINK_OBJECT_DATA" MTDNAME="TO_DATA">
    <SOURCE>`
  DATA _t   LIKE LINE OF a0_maindata-texts.
  DATA _ct  LIKE LINE OF fm_data-class_desc.
  DATA _in  LIKE LINE OF fm_data-implementings.
  DATA _fr  LIKE LINE OF fm_data-friendships.
  DATA _id  LIKE LINE OF fm_data-impl_details.
  DATA _ms  LIKE LINE OF fm_data-method_sources.
  DATA _at  LIKE LINE OF fm_data-attributes.
  DATA _cx  LIKE LINE OF fm_data-exceptions_texts.
  FIELD-SYMBOLS:
    &lt;cx&gt;  LIKE LINE OF exceptions_texts,
    &lt;re&gt;  LIKE LINE OF redefinitions,
    &lt;in&gt;  LIKE LINE OF interfaces,
    &lt;t&gt;   LIKE LINE OF a0_maindata-texts,
    &lt;ia&gt;  LIKE LINE OF &lt;in&gt;-components,
    &lt;ct&gt;  LIKE LINE OF &lt;cx&gt;-texts,
    &lt;fr&gt;  LIKE LINE OF friends.
  DATA _text LIKE LINE OF _cx-texts.
  DATA _cx_l LIKE LINE OF _cx-longtexts.
  DATA _cx_t LIKE LINE OF _cx-texts.

  obj_name = a0_maindata-clsname.
  obj_version = a0_maindata-version.
  obj_langu = a0_maindata-langu.
  obj_type = object_types-class.

* Warning recieving (will reset FM_DATA)
  CALL METHOD super-&gt;to_data
    RECEIVING
      fm_data = fm_data.

  fm_data-class = a0_maindata-hdr.
  READ TABLE a0_maindata-texts INTO _t
       WITH TABLE KEY langu = a0_maindata-langu.
  IF sy-subrc = 0.
    fm_data-class-descript = _t-descript.
  ENDIF.

* Dynpro : Issue 8
  fm_data-dynpros = dynpros.

* TEXTPools : Issue 1
  fm_data-textspool = textspool.

*LOCAL definitions
  fm_data-locals_def = zaplink_object=&gt;conv_abap_source2raw( local-types-_ ).
  fm_data-locals_imp = zaplink_object=&gt;conv_abap_source2raw( local-implementations-_ ).
  fm_data-locals_mac = zaplink_object=&gt;conv_abap_source2raw( local-macros-_ ).

*CLASS_DESC  TYPE tt_SEOCLASSTX,
* Issue 33 : Documentation connected to text
  CALL METHOD td_text
    EXPORTING
      classname     = a0_maindata-clsname
      texts         = a0_maindata-texts
      id            = doc_ids-class-header
    CHANGING
      documentation = fm_data-documentation
      descriptions  = fm_data-class_desc.

  fm_data-inheritance = a0_maindata-inheritance.
  fm_data-inheritance-clsname = a0_maindata-clsname.

*IMPLEMENTINGS  TYPE  SEOR_IMPLEMENTINGS_R
  LOOP AT interfaces ASSIGNING &lt;in&gt;.
    CLEAR _in.
    _in = &lt;in&gt;-hdr.
    _in-clsname = a0_maindata-clsname.
    INSERT _in INTO TABLE fm_data-implementings.

*    LOOP AT &lt;in&gt;-attributes_redefinition ASSIGNING &lt;ia&gt;.
*      _id = &lt;ia&gt;.
    LOOP AT &lt;in&gt;-components ASSIGNING &lt;ia&gt;.
      _id = &lt;ia&gt;-hdr.
      _id-clsname = _in-clsname.
      _id-refclsname = _in-refclsname .
      APPEND _id TO fm_data-impl_details.
      IF &lt;ia&gt;-attvalue IS INITIAL             &quot; Component is a method
         AND &lt;ia&gt;-mtdabstrct IS INITIAL.      &quot; not abstract : with source code
        CLEAR: _ms.

        CONCATENATE &lt;in&gt;-refclsname method_separator &lt;ia&gt;-mtdname INTO _ms-cpdname.
        _ms-redefine = abap_true.
        _ms-source = zaplink_object=&gt;conv_abap_source2raw( &lt;ia&gt;-source-_ ).
        APPEND _ms TO fm_data-method_sources.
      ENDIF.
    ENDLOOP.

  ENDLOOP.

*FRIENDS
*FRIENDSHIPS  TYPE  SEOF_FRIENDSHIPS_R
  LOOP AT friends ASSIGNING &lt;fr&gt;.
    CLEAR _fr.
    _fr = &lt;fr&gt;.
    _fr-clsname = a0_maindata-clsname.
    IF _fr-refclsname IS INITIAL. _fr-refclsname = a0_maindata-clsname. ENDIF.  &quot; do not repeat self : Issue 64
    INSERT _fr INTO TABLE fm_data-friendships.
  ENDLOOP.

*REDEFINITIONS  TYPE  SEOR_REDEFINITIONS_R
*IMPL_DETAILS TYPE  SEOR_REDEFINITIONS_R
  LOOP AT redefinitions ASSIGNING &lt;re&gt;.
    CLEAR: _ms.
    &lt;re&gt;-clsname = a0_maindata-clsname.

    APPEND &lt;re&gt;-hdr TO fm_data-redefinitions.

    _ms-cpdname = &lt;re&gt;-mtdname.
    _ms-redefine = abap_true.
    _ms-source = zaplink_object=&gt;conv_abap_source2raw( &lt;re&gt;-source-_ ).
    APPEND _ms TO fm_data-method_sources.
  ENDLOOP.

* For Exception classes
  LOOP AT exceptions_texts ASSIGNING &lt;cx&gt;.
    CLEAR: _at, _cx.
    _at-clsname = a0_maindata-clsname.    _at-cmpname = &lt;cx&gt;-cmpname.     _at-editorder = &lt;cx&gt;-editorder. &quot; Issue 71.
    IF _at-cmpname IS INITIAL. _at-cmpname = a0_maindata-clsname. ENDIF.  &quot; do not repeat self exception text : Issue 64
    _at-attdecltyp = &apos;2&apos;.   &quot; Constant
    _at-exposure = &apos;2&apos;.     &quot; Public
    _at-state = &apos;1&apos;.        &quot; Implemented
    _at-locked = abap_true.
    _at-typtype = &apos;1&apos;.      &quot; Type
    _at-type = &apos;SOTR_CONC&apos;.
* Useless :
    CALL FUNCTION &apos;GUID_CREATE&apos;
      IMPORTING
        ev_guid_32 = _cx-concept.
    _at-attvalue = sotr2value( _cx-concept ).

    _cx-cmpname = _at-cmpname.
    SELECT SINGLE devclass INTO _cx-paket
      FROM tadir
      WHERE pgmid = &apos;R3TR&apos;
        AND object = object_types-class
        AND obj_name = a0_maindata-clsname.
    _cx-trala_type = 1.
    _cx-crea_lan = a0_maindata-langu.
    _cx-objid_vec = &apos;08000000000000000000&apos;.
    _cx-lhdr = _cx-hdr.
    LOOP AT &lt;cx&gt;-texts ASSIGNING &lt;ct&gt;.
      CLEAR: _cx_t, _cx_l.
      _cx_t-concept = _cx-concept.
      _cx_t-langu = &lt;ct&gt;-langu.
      _cx_t-flag_cntxt = abap_true.
      _cx_t-status = &apos;R&apos;.
      IF NOT &lt;ct&gt;-long_txt IS INITIAL.
        MOVE-CORRESPONDING _cx_t TO _cx_l.
        _cx_l-text = &lt;ct&gt;-long_txt-_.
        APPEND _cx_l TO _cx-longtexts.
      ENDIF.
      _cx_t-length = 255.
      _cx_t-text = &lt;ct&gt;-short_txt.
      APPEND _cx_t TO _cx-texts.
    ENDLOOP.
    IF NOT _cx-texts IS INITIAL OR NOT _cx-longtexts IS INITIAL.    INSERT _cx INTO TABLE fm_data-exceptions_texts.   ENDIF.
    IF NOT _at IS INITIAL.    INSERT _at INTO TABLE fm_data-attributes.   ENDIF.
  ENDLOOP.
  clear_tags( ).</SOURCE>
   </ITEM>
  </REDEFINITIONS>
  <TEXTSPOOL>
   <ITEM ID="I" KEY="F01">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Attribut should exists !!" LENGTH="30 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="I" KEY="SCE">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Source code Expected" LENGTH="20 "/>
    </TEXTS>
   </ITEM>
  </TEXTSPOOL>
  <TYPEGROUPS>
   <ITEM TYPEGROUP="ABAP" IMPLICIT="X"/>
   <ITEM TYPEGROUP="SEOF" EXPLICIT="X"/>
   <ITEM TYPEGROUP="SEOK" EXPLICIT="X"/>
   <ITEM TYPEGROUP="SEOO" EXPLICIT="X"/>
   <ITEM TYPEGROUP="SEOR" EXPLICIT="X"/>
   <ITEM TYPEGROUP="SEOS" EXPLICIT="X"/>
   <ITEM TYPEGROUP="SEOT" EXPLICIT="X"/>
  </TYPEGROUPS>
  <TYPES>
   <ITEM CMPNAME="TO_MSG_COL" EXPOSURE="2" STATE="1" EDITORDER="1 " TYPTYPE="3" TYPE="ZAPLINK_MESSAGE_COLLECTOR">
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Message Collector">
      <DOCUMENTATION TDFRELES="700" TDLINESIZE="072">U1&amp;MEANING&amp;
ASMessage collector
U1&amp;HINTS&amp;
AS</DOCUMENTATION>
     </ITEM>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TS_CLASS_DATA" EXPOSURE="2" STATE="1" EDITORDER="8 " TYPTYPE="4">
    BEGIN OF ts_class_data.
    INCLUDE TYPE vseoclass AS hdr.
*      Include type VSEOEXTEND as Inh.  &quot; Duplicate name for some fields
    TYPES:
**      CLSNAME     type SEOMETAREL-CLSNAME,
*      REFCLSNAME  type SEOMETAREL-REFCLSNAME,
**      VERSION     type SEOMETAREL-VERSION,
**      STATE       type SEOMETAREL-STATE,
*      AUTHOR      type SEOMETAREL-AUTHOR,
*      CREATEDON   type SEOMETAREL-CREATEDON,
*      CHANGEDBY   type SEOMETAREL-CHANGEDBY,
*      CHANGEDON   type SEOMETAREL-CHANGEDON,
*      RELNAME     type SEOMETAREL-RELNAME,
        inheritance TYPE vseoextend,
*        typegroups  TYPE tt_typegroups,
*        interfaces  TYPE tt_interfaces,
*        friends     TYPE tt_friends,
        texts       TYPE tt_seoclasstx_s,
        textpool    TYPE tt_txtp_textpools,
        sources     TYPE ts_sources,
      END OF ts_class_data
`
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Maindata of Class"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TS_EXCEPTION_TEXT" EXPOSURE="2" STATE="1" EDITORDER="2 " TYPTYPE="4">BEGIN OF ts_exception_text,
*    BEGIN OF ts_exception_text.
*    INCLUDE TYPE seoo_attribute_r AS attr.
*    INCLUDE TYPE sotr_head AS cx.
*    TYPES:
        cmpname   TYPE seoo_attribute_r-cmpname,      &quot; Issue 62 : Reorg Exception text
        editorder TYPE seoo_attribute_r-editorder,    &quot; Issue 71 : Keep SOTR Attribut order
        texts     TYPE tt_texts,
*        texts     TYPE tt_seocompotx_l,
*        longtexts TYPE tt_sotr_texts,
      END OF ts_exception_text
`</ITEM>
   <ITEM CMPNAME="TS_LOCALS" EXPOSURE="2" STATE="1" EDITORDER="4 " TYPTYPE="4">
    BEGIN OF ts_locals,
          types           TYPE ts_sourceasstruc,
          implementations TYPE ts_sourceasstruc,
          macros          TYPE ts_sourceasstruc,
        END OF ts_locals
`
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Local data : Type, Implementaiton &amp; Macros">
      <DOCUMENTATION TDFRELES="700" TDLRELES="700" TDLINESIZE="072">U1&amp;MEANING&amp;
ASDescribe a structure that store :
AS,,- Local types definitions
AS,,- Local macros
AS,,- Local class implementation (class in a class)
ASAll these data are pure ABAP Source cope
U1&amp;HINTS&amp;
AS</DOCUMENTATION>
     </ITEM>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TS_REDEFINITION" EXPOSURE="2" STATE="1" EDITORDER="5 " TYPTYPE="4">
    BEGIN OF ts_redefinition.
    INCLUDE TYPE seoredef AS hdr.  &quot; Méthodes redéfinies par relation d&apos;héritage
    TYPES:
        source  TYPE ts_sourceasstruc,
      END OF ts_redefinition
`
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Method&apos;s redefinition data"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TT_EXCEPTIONS_TEXTS" EXPOSURE="2" STATE="1" EDITORDER="3 " TYPTYPE="4">tt_exceptions_texts TYPE SORTED TABLE OF ts_exception_text WITH UNIQUE KEY cmpname
`</ITEM>
   <ITEM CMPNAME="TT_FRIENDS" EXPOSURE="2" STATE="1" EDITORDER="7 " TYPTYPE="4">
    tt_friends    TYPE SORTED TABLE OF seofriends WITH UNIQUE KEY refclsname friendtype
`
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Class Friends list"/>
    </TEXTS>
   </ITEM>
   <ITEM CMPNAME="TT_REDEFINITIONS" EXPOSURE="2" STATE="1" EDITORDER="6 " TYPTYPE="4">
    tt_redefinitions TYPE SORTED TABLE OF ts_redefinition WITH UNIQUE KEY mtdname
`
    <TEXTS>
     <ITEM LANGU="E" DESCRIPT="Class&apos;s Methods redefinitions"/>
    </TEXTS>
   </ITEM>
  </TYPES>
 </RAW>
</ZL_OBJECT>
